{"version":3,"sources":["webpack:///./js/widget/ProductReviewWidget.js"],"names":["ProductReviewWidget","self","productId","$element","attr","$review","load","on","fadeOut","href","fadeIn","$","ajax","url","type","dataType","data","encodeURIComponent","val","beforeSend","remove","before","complete","success","Widget"],"mappings":";;;;;;AAAA;;;;;;;;;;AAEA;;;;AACA;;;;;;;;;;;;IAEMA,mB;;;;;;;;;;;gCACM;AACJ;;AAEA,gBAAIC,OAAO,IAAX;AAAA,gBACIC,YAAYD,KAAKE,QAAL,CAAcC,IAAd,CAAmB,iBAAnB,CADhB;AAAA,gBAEIC,UAAU,sBAAE,SAAF,CAFd;;AAIAA,oBAAQC,IAAR,CAAa,uDAAuDJ,SAApE;AACAG,oBAAQE,EAAR,CAAW,OAAX,EAAoB,eAApB,EAAqC,YAAW;AAC5CF,wBAAQG,OAAR,CAAgB,MAAhB;AACAH,wBAAQC,IAAR,CAAa,KAAKG,IAAlB;AACAJ,wBAAQK,MAAR,CAAe,MAAf;;AAEA,uBAAO,KAAP;AACH,aAND;;AAQA,kCAAE,gBAAF,EAAoBH,EAApB,CAAuB,OAAvB,EAAgC,YAAW;AACvCI,iCAAEC,IAAF,CAAO;AACHC,yBAAK,sDAAsDX,SADxD;AAEHY,0BAAM,MAFH;AAGHC,8BAAU,MAHP;AAIHC,0BAAM,UAAUC,mBAAmB,sBAAE,sBAAF,EAA0BC,GAA1B,EAAnB,CAAV,GACA,QADA,GACWD,mBAAmB,sBAAE,yBAAF,EAA6BC,GAA7B,EAAnB,CADX,GAEA,UAFA,GAEaD,mBAAmB,sBAAE,gCAAF,EAAoCC,GAApC,KAA4C,sBAAE,gCAAF,EAAoCA,GAApC,EAA5C,GAAwF,EAA3G,CAFb,GAGA,WAHA,GAGcD,mBAAmB,sBAAE,yBAAF,EAA6BC,GAA7B,EAAnB,CAPjB;AAQHC,gCAAY,sBAAW;AACnB,8CAAE,oBAAF,EAAwBC,MAAxB;AACA,8CAAE,gBAAF,EAAoBhB,IAApB,CAAyB,UAAzB,EAAqC,IAArC;AACA,8CAAE,gBAAF,EAAoBiB,MAApB,CAA2B,uHAA3B;AACH,qBAZE;AAaHC,8BAAU,oBAAW;AACjB,8CAAE,gBAAF,EAAoBlB,IAApB,CAAyB,UAAzB,EAAqC,KAArC;AACA,8CAAE,YAAF,EAAgBgB,MAAhB;AACH,qBAhBE;AAiBHG,6BAAS,iBAASP,IAAT,EAAe;AACpB,4BAAIA,KAAK,OAAL,CAAJ,EAAmB;AACf,kDAAE,gBAAF,EAAoBK,MAApB,CAA2B,0BAA0BL,KAAK,OAAL,CAA1B,GAA0C,QAArE;AACH;;AAED,4BAAIA,KAAK,SAAL,CAAJ,EAAqB;AACjB,kDAAE,gBAAF,EAAoBK,MAApB,CAA2B,0BAA0BL,KAAK,SAAL,CAA1B,GAA4C,QAAvE;;AAEA,kDAAE,sBAAF,EAA0BE,GAA1B,CAA8B,EAA9B;AACA,kDAAE,yBAAF,EAA6BA,GAA7B,CAAiC,EAAjC;AACA,kDAAE,gCAAF,EAAoCd,IAApC,CAAyC,SAAzC,EAAoD,EAApD;AACA,kDAAE,yBAAF,EAA6Bc,GAA7B,CAAiC,EAAjC;AACH;AACJ;AA9BE,iBAAP;AAgCH,aAjCD;AAkCH;;;;EAnD6BM,mB;;kBAsDnBxB,mB","file":"js/chunk/ProductReviewWidget.19.js?378323dc377b830d20b6","sourcesContent":["'use strict';\n\nimport $ from 'jquery';\nimport Widget from 'lib-widget';\n\nclass ProductReviewWidget extends Widget {\n    _init() {\n        super._init();\n\n        var self = this,\n            productId = self.$element.attr('data-product-id'),\n            $review = $('#review');\n\n        $review.load('index.php?route=product/product/review&product_id=' + productId);\n        $review.on('click', '.pagination a', function() {\n            $review.fadeOut('slow');\n            $review.load(this.href);\n            $review.fadeIn('slow');\n\n            return false;\n        });\n\n        $('#button-review').on('click', function() {\n            $.ajax({\n                url: 'index.php?route=product/product/write&product_id=' + productId,\n                type: 'post',\n                dataType: 'json',\n                data: 'name=' + encodeURIComponent($('input[name=\\'name\\']').val())\n                    + '&text=' + encodeURIComponent($('textarea[name=\\'text\\']').val())\n                    + '&rating=' + encodeURIComponent($('input[name=\\'rating\\']:checked').val() ? $('input[name=\\'rating\\']:checked').val() : '')\n                    + '&captcha=' + encodeURIComponent($('input[name=\\'captcha\\']').val()),\n                beforeSend: function() {\n                    $('.success, .warning').remove();\n                    $('#button-review').attr('disabled', true);\n                    $('#button-review').before('<div class=\"attention\"><img src=\"catalog/view/theme/hyla/image/loading.gif\" alt=\"\" /> <?php echo $text_wait; ?></div>');\n                },\n                complete: function() {\n                    $('#button-review').attr('disabled', false);\n                    $('.attention').remove();\n                },\n                success: function(data) {\n                    if (data['error']) {\n                        $('#button-review').before('<div class=\"warning\">' + data['error'] + '</div>');\n                    }\n\n                    if (data['success']) {\n                        $('#button-review').before('<div class=\"success\">' + data['success'] + '</div>');\n\n                        $('input[name=\\'name\\']').val('');\n                        $('textarea[name=\\'text\\']').val('');\n                        $('input[name=\\'rating\\']:checked').attr('checked', '');\n                        $('input[name=\\'captcha\\']').val('');\n                    }\n                }\n            });\n        });\n    }\n}\n\nexport default ProductReviewWidget;\n\n\n\n// WEBPACK FOOTER //\n// ./js/widget/ProductReviewWidget.js"],"sourceRoot":""}