{"version":3,"sources":["webpack:///./js/utils/GoogleMap.js"],"names":["GoogleMap","$element","settings","isMobile","test","navigator","userAgent","defaultSettings","selector","viewport","locations","map","scrollwheel","draggable","zoom","styles","$","extend","defaultOptions","center","x","y","mapOptions","locationOptions","init","self","$map","$viewport","find","options","getOptions","google","maps","Map","LatLng","parseFloat","infoWindows","markers","each","locationIndex","Marker","position","icon","index","content","InfoWindow","event","addListener","j","setIcon","setContent","open","setTimeout","getZoom","c","getCenter","trigger","setZoom","setCenter","$locations","i","optionName","optionValue","attr","undefined","length","locationElement","$location","optionIndex","trim","html","module","exports"],"mappings":"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","file":"js/chunk/GoogleMap.21.js?648a2b169b9f854e304d","sourcesContent":["'use strict';\n\nimport $ from 'jquery';\n\nclass GoogleMap {\n  constructor($element, settings) {\n    this.$element = $element;\n    this.isMobile = (/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent));\n    this.defaultSettings = {\n        selector: {\n          viewport: '.google-map-viewport',\n          locations: '.locations'\n        },\n        map: {\n          scrollwheel: false,\n          draggable: !this.isMobile,\n          zoom: 16,\n          styles: []\n        },\n        locations: []\n      };\n    this.settings = $.extend(true, {}, this.defaultSettings, settings);\n    this.defaultOptions = {\n        map: {\n          center: {\n            x: 0,\n            y: 0\n          },\n          zoom: 14,\n          styles: []\n        },\n        locations: []\n      };\n    this.mapOptions = [\n      'zoom',\n      'styles'\n    ];\n    this.locationOptions = [\n      'x',\n      'y',\n      'info-state',\n      'marker-basic',\n      'marker-active'\n    ];\n    \n    this.init();\n  }\n  \n  init() {\n    let self = this,\n      $map = this.$element,\n      $viewport = $map.find(self.settings.selector.viewport),\n      options = $.extend(\n        true,\n        {},\n        self.defaultOptions,\n        self.getOptions($map, self.settings)\n      ),\n      map = new google.maps.Map(\n        $viewport[0],\n        $.extend(\n          true,\n          {},\n          self.settings.map,\n          {\n            center: new google.maps.LatLng(\n              parseFloat(self.settings.map.center.y),\n              parseFloat(self.settings.map.center.x)\n            ),\n          }\n        )\n        \n      ),\n      infoWindows = [],\n      markers = [];\n    \n    $.each(options.locations, function (locationIndex, locationOptions) {\n      markers[locationIndex] = new google.maps.Marker(\n        {\n          position: new google.maps.LatLng(\n            parseFloat(locationOptions.y),\n            parseFloat(locationOptions.x)),\n          map: map,\n          icon: locationOptions['marker-basic'],\n          index: locationIndex\n        }\n      );\n    \n      if (locationOptions.content) {\n        infoWindows[locationIndex] = new google.maps.InfoWindow({content: locationOptions.content});\n      \n        google.maps.event.addListener(markers[locationIndex], 'click', function () {\n          for (var j in markers) {\n            markers[j].setIcon(options.locations[j]['marker-basic']);\n          }\n          this.setIcon(locationOptions['marker-active']);\n        \n          infoWindows[locationIndex].setContent(locationOptions.content);\n          infoWindows[locationIndex].open(map, this);\n        });\n      \n        google.maps.event.addListener(infoWindows[locationIndex], 'closeclick', function () {\n          for (var j in markers) {\n            markers[j].setIcon(options.locations[j]['marker-basic']);\n          }\n        });\n      \n        if ('open' === locationOptions['info-state']) {\n          infoWindows[locationIndex].open(map, markers[locationIndex]);\n          markers[locationIndex].setIcon(locationOptions['marker-active']);\n        }\n      }\n    });\n  \n    // google.maps.event.addDomListener(window, 'resize', function() {\n    //   map.setCenter(new google.maps.LatLng(\n    //     parseFloat(options.map.center.y),\n    //     parseFloat(options.map.center.x)\n    //   ));\n    // });\n  \n    setTimeout(function(){\n      var x = map.getZoom();\n      var c = map.getCenter();\n      google.maps.event.trigger(map, 'resize');\n      map.setZoom(x);\n      map.setCenter(c);\n    }, 200);\n\n    setTimeout(function(){\n      var x = map.getZoom();\n      var c = map.getCenter();\n      google.maps.event.trigger(map, 'resize');\n      map.setZoom(x);\n      map.setCenter(c);\n    }, 500);\n  }\n  \n  getOptions($map, settings) {\n    var self = this;\n    var $locations = $map.find(settings.selector.locations).find('li'),\n      options = {\n        map: {},\n        locations: []\n      };\n    \n    $.each(self.mapOptions, function (i, optionName) {\n      var optionValue = $map.attr('data-' + optionName);\n      if (undefined !== optionValue) {\n        options.map[optionName] = optionValue;\n      }\n    });\n    \n    if ($locations.length > 0) {\n      $locations.each(function (locationIndex, locationElement) {\n        var $location = $(locationElement);\n        \n        options.locations[locationIndex] = {};\n        $.each(self.locationOptions, function (optionIndex, optionName) {\n          var optionValue = $location.attr('data-' + optionName);\n          if (undefined !== optionValue) {\n            options.locations[locationIndex][optionName] = optionValue;\n          }\n        });\n        \n        var content = $.trim($location.html());\n        if (!content) {\n          options.locations[locationIndex]['content'] = '';\n        } else {\n          options.locations[locationIndex]['content'] = content;\n        }\n      });\n    }\n    \n    return options;\n  }\n}\n\nmodule.exports = GoogleMap;\n\n\n\n// WEBPACK FOOTER //\n// ./js/utils/GoogleMap.js"],"sourceRoot":""}