{"version":3,"sources":["webpack:////Users/mov/Brisum/docker/webserver/www/elastic/www/wp-content/themes/elastic/module/CheckoutOneClick/Resources/assets/js/checkout-one-click.widget.js"],"names":["$","Widget","BundleLoader","CheckoutOneClickWidget","$element","options","self","on","event","variation","val","id","args","productId","find","load","require","Popup","$form","closest","$variationId","length","attr","tooltip","placement","trigger","setTimeout","one","removeAttr","paymentMethod","paymentType","paymentTerm","popup","$context","getContext","loading","name","show","ajax","type","url","Theme","adminAjax","data","action","success","response","content","location","href","Brisum","AstuteForm","afterSend"],"mappings":"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","file":"js/chunk/checkout-one-click.widget.16.js?2b05184e60ef968890f6","sourcesContent":["define([\n    'jquery',\n    'lib-widget',\n    'lib-bundle-loader'\n],\nfunction(\n    $,\n    Widget,\n    BundleLoader\n) {\n    class CheckoutOneClickWidget extends Widget {\n        constructor($element, options) {\n            super($element, options);\n        }\n\n        _init() {\n            super._init();\n\n            let self = this;\n\n            $('body').on('found_variation', 'form.cart.variations_form', function (event, variation) {\n                self.$element.val(variation.id);\n            });\n\n            $('body').on('reset_data', 'form.cart.variations_form', function (event, args) {\n                let productId = $(this).find('input[name=\"product_id\"]').val();\n                self.$element.val(productId);\n            });\n\n            BundleLoader.load(\n                [\n                    require('bundle-loader?&name=Popup!Popup')\n                ],\n                function (\n                    Popup\n                ) {\n                    self.$element.on('click', function () {\n                        let $form = self.$element.closest('form.cart.variations_form'),\n                            $variationId = $form.find('.variations_button .variation_id');\n                        if (0 !== $variationId.length && '' === $variationId.val()) {\n                            self.$element.attr('title', 'Выберите опции')\n                                .tooltip({placement: 'top', trigger: 'manual'})\n                                .tooltip('show');\n\n                            setTimeout(function () {\n                                self.$element.tooltip('hide');\n                            }, 2000);\n                            self.$element.one('hidden.bs.tooltip', function () {\n                                self.$element.removeAttr('title');\n                            });\n                            return false;\n                        }\n\n                        let productId = self.$element.val(),\n                            paymentMethod = self.$element.attr('data-payment-method'),\n                            paymentType = self.$element.attr('data-payment-type'),\n                            paymentTerm = self.$element.attr('data-payment-term'),\n                            popup = new Popup(),\n                            $context = popup.getContext();\n\n                        popup.loading(true);\n                        popup.name('checkout-one-click');\n                        popup.show();\n                        $.ajax({\n                            type: 'post',\n                            url: Theme.url.adminAjax,\n                            data: {\n                                action: 'checkout-one-click'\n                            },\n                            success: function (response) {\n                                popup.content(response);\n                                $context.find('input[name=\"checkout1click[product_id]\"]').val(productId);\n                                $context.find('input[name=\"checkout1click[payment_method]\"]').val(paymentMethod);\n                                $context.find('input[name=\"checkout1click[payment_type]\"]').val(paymentType);\n                                $context.find('input[name=\"checkout1click[payment_term]\"]').val(paymentTerm);\n                                $context.find('input[name=\"checkout1click[page_request]\"]').val(location.href);\n\n                                new Brisum.AstuteForm(\n                                    $context.find('#checkout-one-click'),\n                                    {\n                                        afterSend: function () {\n                                            $context.find('#checkout-one-click input[name=\"checkout1click[page_request]\"]')\n                                                .val(location.href);\n                                        }\n                                    }\n                                );\n\n                                popup.loading(false);\n                            }\n                        });\n\n                        return false;\n                    });\n                }\n            );\n        }\n    }\n\n    return CheckoutOneClickWidget;\n});\n\n\n\n// WEBPACK FOOTER //\n// /Users/mov/Brisum/docker/webserver/www/elastic/www/wp-content/themes/elastic/module/CheckoutOneClick/Resources/assets/js/checkout-one-click.widget.js"],"sourceRoot":""}